---
layout: post
title: Wave Function Collapse
featured: /assets/wfc/wfc-rooms.png
---

Wave Function Collapse is quite a nice algorithm invented by [Maxim Gumin](https://github.com/mxgmn/WaveFunctionCollapse). However, Gumin's source file could be __really__ obscure and hard to understand, so I am writing what I've learned so far here, so that I could remember it when it is needed.

## Introduction

What the hell is Wave Function Collapse, exactly? This is a concept loosely borrowed from Quantum Machanics. I really advise you to watch [this video](https://www.youtube.com/watch?v=PKioZfRw2-Y) if you are interested in that kind of stuffs. But here we are talking about WaveFunctionCollapse, the _PCG (ProCedural Generation) algorithm_. It's usage is quite simple: You feed it an input image, or whatever looks like an image, and it outputs errily similar results. Let's take a look at a few (stolen directly from GitHub repo):

![wfc](/assets/wfc/wfc.png)

Now, isn't this cool? Without all sorts of "machine learning" and stuffs, by only solving the constraints, lots of lively stuffs could appear out of nowhere!

## Try it out

Now, I've implemented one in Javascript. You could play with it for a little bit, however I am not really sure whether my generator could get the same result with Maxim Gumin's or not. Also I will cap N at 3 (Trust me, you browser won't want to go beyond). The color stripe at the bottom is the palatte. Use it to switch colors.

<div>
<canvas id="input" width="500" height="542" style="margin: 1em 0; width: 250px; height: 271px"></canvas>
<canvas id="output" width="500" height="542" style="margin: 1em 0; width: 250px; height: 271px"></canvas>
</div>

<script src="/assets/wfc/main.js" type="module"></script>

N = <input id="n" value="2" type="number" step="1" max="3" min="1"> <a id="generate" href="javascript:void(0)">generate</a> \| <a id="clear" href="javascript:void(0)">clear</a>
